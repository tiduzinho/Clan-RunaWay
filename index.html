<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recrutamento RunaWay - BPT</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- ESTILOS GERAIS --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Roboto', sans-serif;
            /* Fundo escuro com gradiente sutil */
            background: linear-gradient(135deg, #0f0f0f 0%, #1a0505 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background-color: rgba(0, 0, 0, 0.9);
            width: 100%;
            max-width: 600px;
            padding: 40px;
            border-radius: 15px;
            border: 2px solid #ffd700; /* Borda Dourada */
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.3); /* Brilho vermelho */
        }

        .logo-container { text-align: center; }
        .logo-container img {
            max-width: 150px;
            margin-bottom: 10px;
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.5));
        }

        h2 {
            font-family: 'Cinzel', serif;
            color: #ffd700;
            text-align: center;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        p.subtitle {
            color: #ccc;
            font-size: 0.9rem;
            text-align: center;
            margin-bottom: 30px;
        }

        /* --- SEPARADORES DE SEÇÃO --- */
        .section-title {
            color: #ff4444;
            border-bottom: 1px solid #444;
            padding-bottom: 5px;
            margin-top: 25px;
            margin-bottom: 15px;
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
        }

        .form-group { margin-bottom: 15px; }

        label {
            display: block;
            margin-bottom: 5px;
            color: #ccc;
            font-size: 0.9rem;
            font-weight: bold;
        }

        input, select {
            width: 100%;
            padding: 12px;
            background-color: #1a1a1a;
            border: 1px solid #444;
            border-radius: 5px;
            color: white;
            font-size: 1rem;
            outline: none;
            transition: 0.3s;
        }

        input:focus, select:focus {
            border-color: #ffd700;
            box-shadow: 0 0 8px rgba(255, 215, 0, 0.2);
        }

        /* Grid para telas maiores */
        .row { display: flex; gap: 15px; }
        .col { flex: 1; }

        button {
            width: 100%;
            padding: 15px;
            margin-top: 30px;
            background: linear-gradient(45deg, #8b0000, #d32f2f);
            color: white;
            border: none;
            border-radius: 5px;
            font-family: 'Cinzel', serif;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            transition: 0.2s;
        }
        button:hover { transform: scale(1.02); box-shadow: 0 0 15px rgba(255, 0, 0, 0.6); }
        button:disabled { background: #555; cursor: not-allowed; }

        @media (max-width: 600px) {
            .row { flex-direction: column; gap: 0; }
            .col { margin-bottom: 15px; }
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="logo-container">
            <img src="logo-runaway.png" alt="Logo RunaWay">
        </div>

        <h2>Ficha de Membro</h2>
        <p class="subtitle">Preencha todos os campos corretamente.</p>
        
        <form id="formClan">
            
            <div class="section-title">1. Dados Pessoais</div>
            
            <div class="form-group">
                <label>Nome Completo</label>
                <input type="text" id="nome_completo" required>
            </div>

            <div class="row">
                <div class="col">
                    <label>WhatsApp</label>
                    <input type="text" id="whatsapp" placeholder="(XX) 9XXXX-XXXX" required>
                </div>
                <div class="col">
                    <label>Rede Social (Insta)</label>
                    <input type="text" id="instagram" placeholder="@seu.insta">
                </div>
            </div>

            <div class="form-group">
                <label>Sabe utilizar o Discord?</label>
                <select id="discord_exp" required>
                    <option value="" disabled selected>Selecione...</option>
                    <option value="Sim">Sim, utilizo sempre</option>
                    <option value="Mais ou menos">Mais ou menos</option>
                    <option value="Não">Não sei usar</option>
                </select>
            </div>

            <div class="section-title">2. Sobre o Char</div>

            <div class="row">
                <div class="col">
                    <label>Nickname (Char)</label>
                    <input type="text" id="nick" required>
                </div>
                <div class="col">
                    <label>Classe</label>
                    <select id="classe" required>
                        <option value="" disabled selected>Selecione...</option>
                        <option value="Mecânico">Mecânico</option>
                        <option value="Lutador">Lutador</option>
                        <option value="Pike">Pike</option>
                        <option value="Arqueira">Arqueira</option>
                        <option value="Mago">Mago</option>
                        <option value="Sacerdotisa">Sacerdotisa</option>
                        <option value="Atalanta">Atalanta</option>
                        <option value="Cavaleiro">Cavaleiro</option>
                        <option value="Xamã">Xamã</option>
                        <option value="Assassina">Assassina</option>
                    </select>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <label>Nível Atual</label>
                    <input type="number" id="nivel" required>
                </div>
                <div class="col">
                    <label>Origem do Char</label>
                    <select id="origem_char" required>
                        <option value="Criado">Criado do Zero</option>
                        <option value="Comprado">Char Comprado</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label style="color: #ffd700;">Tem Share? (Divide a conta)</label>
                <select id="tem_share" required style="border-color: #ffd700;">
                    <option value="" disabled selected>Selecione...</option>
                    <option value="Não">Não, jogo sozinho</option>
                    <option value="Sim">Sim, tenho share</option>
                </select>
            </div>

            <div class="section-title">3. Histórico</div>

            <div class="form-group">
                <label>Nicks que já possuiu (Opcional)</label>
                <input type="text" id="nicks_antigos" placeholder="Ex: ZezinhoMatador, DarkLord...">
            </div>

            <div class="form-group">
                <label>Clans que já participou</label>
                <input type="text" id="clans_antigos" placeholder="Ex: Alcatraz, Titans...">
            </div>

            <button type="submit" id="btnEnviar">Enviar Ficha</button>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script>
        // CONFIGURAÇÃO REAL DO SUPABASE (Chaves fornecidas)
        const supabaseUrl = 'https://qemgbjzabucocczgdjzc.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFlbWdianphYnVjb2NjemdkanpjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEzMzI2OTAsImV4cCI6MjA3NjkwODY5MH0.fGvmXWl5oYhRb9SIvqAH8z7ErrF327_acxGl75Yv6Y0';
        
        // Inicializa o cliente
        const supabase = supabase.createClient(supabaseUrl, supabaseKey);

        const form = document.getElementById('formClan');
        const btn = document.getElementById('btnEnviar');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            btn.innerText = "Enviando...";
            btn.disabled = true;

            const dados = {
                nome_completo: document.getElementById('nome_completo').value,
                whatsapp: document.getElementById('whatsapp').value,
                instagram: document.getElementById('instagram').value,
                discord_exp: document.getElementById('discord_exp').value,
                
                nickname: document.getElementById('nick').value,
                classe: document.getElementById('classe').value,
                nivel: parseInt(document.getElementById('nivel').value),
                origem_char: document.getElementById('origem_char').value,
                tem_share: document.getElementById('tem_share').value,

                nicks_antigos: document.getElementById('nicks_antigos').value,
                clans_antigos: document.getElementById('clans_antigos').value
            };

            // Envia para a tabela 'membros_clan'
            const { data, error } = await supabase
                .from('membros_clan')
                .insert([dados]);

            if (error) {
                alert('Erro ao enviar: ' + error.message);
                console.error(error);
                btn.innerText = "Tentar Novamente";
                btn.disabled = false;
            } else {
                alert('Ficha enviada com sucesso! Bem-vindo à RunaWay.');
                form.reset();
                btn.innerText = "Enviar Ficha";
                btn.disabled = false;
            }
        });
    </script>
</body>
</html>